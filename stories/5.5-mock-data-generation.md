---
title: "Story 5.5 - Mock Data: Zapier Event Templates, One-Click Sample Generation"
status: "Ready for Development"
epic: "Epic 5: Debug Control Panel + UI Polish"
priority: "P1"
story_size: "Medium"
estimated_hours: 4
created_at: "2025-11-11"
modified_at: "2025-11-11"
---

## Summary

Create a comprehensive library of realistic Zapier event templates and a one-click mock data generator. Allow users to instantly populate the system with sample events representing common Zapier triggers. Provide templates for popular integrations (user management, orders, payments, webhooks) with realistic data and proper metadata structure.

## Business Value

Eliminates the friction of manual event creation during demonstrations. Users can instantly see the system with realistic data, making the demo more impressive and credible. Realistic mock data matches real Zapier event structures, increasing relevance for audience. Enables users to quickly test various scenarios without writing JSON manually.

## Technical Context

**From PRD (FR-7.1: Mock Zapier Integration):**
- System MUST include mock Zapier event data for demonstration
- Mock data MUST represent realistic event types and payloads
- System MUST allow easy generation of sample events via UI

**From Architecture:**
- Mock data follows event payload and metadata structure defined in PRD
- Located in `src/ui/mock-data.js`
- One-click generation UI in debug panel

**Event Structure:**
```javascript
{
  payload: { /* Actual event data */ },
  metadata: {
    event_type: "...",
    source: "...",
    custom_field: "..."
  }
}
```

## Acceptance Criteria

1. **Mock Data Library**
   - Create 15+ realistic event templates
   - Cover major integration categories:
     - User Management (user.created, user.updated, user.deleted)
     - E-commerce (order.created, order.paid, order.shipped)
     - Payments (payment.completed, payment.failed, payment.refunded)
     - Communications (email.sent, sms.sent, message.received)
     - Webhooks (webhook.received, webhook.failed)
   - Each template includes sample data with realistic values
   - Templates are parameterized (can customize specific fields)

2. **User Creation Template**
   - Event type: `user.created`
   - Source: `auth-service` or `user-management`
   - Payload fields:
     - user_id (UUID)
     - email (realistic email)
     - first_name, last_name
     - created_at (ISO timestamp)
     - status (active)
   - Real example: `{payload: {user_id: "usr_abc123", email: "john@example.com", ...}}`

3. **Order Creation Template**
   - Event type: `order.created`
   - Source: `ecommerce-service` or `shopify`
   - Payload fields:
     - order_id (unique ID)
     - customer_id (linked customer)
     - amount (USD)
     - currency (USD)
     - items (array of products with sku, quantity, price)
     - status (pending)
     - created_at (ISO timestamp)
   - Example: `{payload: {order_id: "ord_xyz789", amount: 199.99, items: [...]}}`

4. **Payment Template**
   - Event type: `payment.completed`
   - Source: `stripe` or `payment-service`
   - Payload fields:
     - payment_id (unique ID)
     - amount (in cents)
     - currency
     - status (completed)
     - customer_id
     - payment_method (card type)
     - created_at
   - Example: `{payload: {payment_id: "pay_abc123", amount: 19999, status: "completed"}}`

5. **Product Updated Template**
   - Event type: `product.updated`
   - Source: `inventory-service` or `woocommerce`
   - Payload fields:
     - product_id
     - name
     - price
     - stock
     - updated_at
   - Example: realistic product data

6. **Subscription Event Template**
   - Event type: `subscription.created` / `subscription.cancelled`
   - Source: `billing-service`
   - Payload fields:
     - subscription_id
     - customer_id
     - plan_id
     - status (active/cancelled)
     - renewal_date
   - Example: subscription data

7. **Message/Communication Templates**
   - Event types: `email.sent`, `sms.sent`, `message.received`
   - Payload: recipient, sender, subject/body, timestamp
   - Realistic message content

8. **Webhook Template**
   - Event type: `webhook.received`
   - Source: `external-webhook` or specific service
   - Payload: arbitrary JSON (flexible)
   - Metadata: includes source and timestamp

9. **Template Selector UI**
   - Dropdown/grid view of all templates
   - Template name and icon
   - Brief description
   - One-click "Use Template" button
   - Preview payload before submission
   - Customization options for some fields

10. **Template Customization**
    - Allow users to modify specific fields before submission
    - Modal dialog with form fields
    - Common fields editable: email, amount, customer_id, etc.
    - Validate data types (email format, numeric for amount, etc.)
    - Reset to template defaults button
    - Preview updated payload

11. **Batch Generation**
    - Generate multiple events from same template
    - Input field: "How many events to generate?" (1-100)
    - Randomize variations:
      - Different user IDs/emails for user templates
      - Different order amounts for order templates
      - Different timestamps (spread over time)
    - Progress indicator while generating
    - Summary: "Generated 25 events from order.created template"

12. **Realistic Data Generation**
    - Use deterministic random data (seeded for reproducibility)
    - First names, last names from realistic lists
    - Email addresses: firstname.lastname@example.com
    - UUIDs for IDs (consistent format)
    - Amounts with realistic ranges per template
    - Timestamps close to current time (last 24 hours)
    - SKUs in realistic format (e.g., "SKU-001", "PROD-12345")

13. **Template Browser**
    - Gallery view of all templates
    - Show template name, icon, category
    - Filter by category (Users, Orders, Payments, etc.)
    - Search by template name or event type
    - Show statistics: how many times used, timestamp
    - Favorite/star frequently used templates

14. **Quick Actions**
    - "Load Demo" button: generates 5-10 sample events from different templates
    - "Stress Test": generates 100+ events rapidly
    - "Realistic Scenario": sequence of related events (user created â†’ order placed â†’ payment made)
    - "Clear All": delete all sample events (uses acknowledgment endpoint)

15. **Template Documentation**
    - Hover tooltip on each template showing:
      - Full event type
      - Common fields and their meanings
      - Metadata fields included
      - Use case/when this event fires
    - Link to full schema documentation
    - Example JSON for reference

## Dependencies

- **Story 1.2:** API Worker with POST /events endpoint
- **Story 1.3:** Auth middleware for token validation
- **Story 5.1:** Debug control panel (mock data generator integrated here)
- **Story 5.2:** Visual feedback (toasts for success/error)

## Technical Specifications

### Mock Data Library

```javascript
// src/ui/mock-data.js
class MockDataGenerator {
  constructor() {
    this.templates = this.initializeTemplates();
  }

  initializeTemplates() {
    return {
      'user.created': {
        name: 'User Created',
        icon: 'ðŸ‘¤',
        category: 'Users',
        description: 'A new user account created',
        eventType: 'user.created',
        source: 'auth-service',
        generate: () => ({
          payload: {
            user_id: this.generateUUID('usr'),
            email: this.generateEmail(),
            first_name: this.randomFirstName(),
            last_name: this.randomLastName(),
            status: 'active',
            created_at: new Date().toISOString()
          },
          metadata: {
            event_type: 'user.created',
            source: 'auth-service'
          }
        })
      },

      'user.updated': {
        name: 'User Updated',
        icon: 'âœï¸',
        category: 'Users',
        description: 'User profile updated',
        eventType: 'user.updated',
        source: 'auth-service',
        generate: () => ({
          payload: {
            user_id: this.generateUUID('usr'),
            email: this.generateEmail(),
            first_name: this.randomFirstName(),
            last_name: this.randomLastName(),
            updated_at: new Date().toISOString(),
            changed_fields: ['email', 'first_name']
          },
          metadata: {
            event_type: 'user.updated',
            source: 'auth-service'
          }
        })
      },

      'order.created': {
        name: 'Order Created',
        icon: 'ðŸ›’',
        category: 'E-commerce',
        description: 'New order placed',
        eventType: 'order.created',
        source: 'ecommerce-service',
        generate: () => ({
          payload: {
            order_id: this.generateUUID('ord'),
            customer_id: this.generateUUID('cust'),
            amount: this.randomAmount(10, 500),
            currency: 'USD',
            status: 'pending',
            items: [
              {
                sku: 'SKU-' + Math.floor(Math.random() * 9999),
                name: this.randomProductName(),
                quantity: Math.floor(Math.random() * 5) + 1,
                price: this.randomAmount(5, 200)
              }
            ],
            created_at: new Date().toISOString()
          },
          metadata: {
            event_type: 'order.created',
            source: 'ecommerce-service'
          }
        })
      },

      'order.paid': {
        name: 'Order Paid',
        icon: 'âœ…',
        category: 'E-commerce',
        description: 'Order payment received',
        eventType: 'order.paid',
        source: 'ecommerce-service',
        generate: () => ({
          payload: {
            order_id: this.generateUUID('ord'),
            customer_id: this.generateUUID('cust'),
            amount: this.randomAmount(10, 500),
            currency: 'USD',
            status: 'paid',
            payment_id: this.generateUUID('pay'),
            paid_at: new Date().toISOString()
          },
          metadata: {
            event_type: 'order.paid',
            source: 'ecommerce-service'
          }
        })
      },

      'order.shipped': {
        name: 'Order Shipped',
        icon: 'ðŸ“¦',
        category: 'E-commerce',
        description: 'Order dispatched to customer',
        eventType: 'order.shipped',
        source: 'ecommerce-service',
        generate: () => ({
          payload: {
            order_id: this.generateUUID('ord'),
            tracking_number: 'TRK-' + Math.floor(Math.random() * 999999),
            carrier: this.randomCarrier(),
            shipped_at: new Date().toISOString(),
            estimated_delivery: this.futureDate(3, 7)
          },
          metadata: {
            event_type: 'order.shipped',
            source: 'ecommerce-service'
          }
        })
      },

      'payment.completed': {
        name: 'Payment Completed',
        icon: 'ðŸ’³',
        category: 'Payments',
        description: 'Payment processing successful',
        eventType: 'payment.completed',
        source: 'stripe',
        generate: () => ({
          payload: {
            payment_id: this.generateUUID('pay'),
            amount: this.randomAmount(10, 10000),
            currency: 'USD',
            status: 'completed',
            customer_id: this.generateUUID('cust'),
            payment_method: this.randomPaymentMethod(),
            receipt_url: 'https://example.com/receipts/' + this.generateUUID(),
            created_at: new Date().toISOString()
          },
          metadata: {
            event_type: 'payment.completed',
            source: 'stripe'
          }
        })
      },

      'payment.failed': {
        name: 'Payment Failed',
        icon: 'âŒ',
        category: 'Payments',
        description: 'Payment processing failed',
        eventType: 'payment.failed',
        source: 'stripe',
        generate: () => ({
          payload: {
            payment_id: this.generateUUID('pay'),
            amount: this.randomAmount(10, 10000),
            currency: 'USD',
            status: 'failed',
            customer_id: this.generateUUID('cust'),
            error_code: this.randomPaymentErrorCode(),
            error_message: this.randomPaymentErrorMessage(),
            created_at: new Date().toISOString()
          },
          metadata: {
            event_type: 'payment.failed',
            source: 'stripe'
          }
        })
      },

      'email.sent': {
        name: 'Email Sent',
        icon: 'ðŸ“§',
        category: 'Communications',
        description: 'Email delivered to recipient',
        eventType: 'email.sent',
        source: 'sendgrid',
        generate: () => ({
          payload: {
            email_id: this.generateUUID('email'),
            recipient: this.generateEmail(),
            subject: this.randomEmailSubject(),
            sent_at: new Date().toISOString(),
            template: 'transactional'
          },
          metadata: {
            event_type: 'email.sent',
            source: 'sendgrid'
          }
        })
      },

      'webhook.received': {
        name: 'Webhook Received',
        icon: 'ðŸ”—',
        category: 'Webhooks',
        description: 'Incoming webhook from external service',
        eventType: 'webhook.received',
        source: 'external-webhook',
        generate: () => ({
          payload: {
            webhook_id: this.generateUUID('wh'),
            source_service: this.randomWebhookSource(),
            data: {
              event: this.randomWebhookEvent(),
              timestamp: new Date().toISOString()
            }
          },
          metadata: {
            event_type: 'webhook.received',
            source: 'external-webhook'
          }
        })
      }
    };
  }

  // Utility methods for data generation
  generateUUID(prefix = '') {
    const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {
      const r = (Math.random() * 16) | 0;
      const v = c === 'x' ? r : (r & 0x3) | 0x8;
      return v.toString(16);
    });
    return prefix ? `${prefix}_${uuid.slice(0, 8)}` : uuid;
  }

  generateEmail() {
    const firstName = this.randomFirstName().toLowerCase();
    const lastName = this.randomLastName().toLowerCase();
    const domains = ['example.com', 'test.com', 'demo.com'];
    const domain = domains[Math.floor(Math.random() * domains.length)];
    return `${firstName}.${lastName}@${domain}`;
  }

  randomFirstName() {
    const names = ['John', 'Jane', 'Michael', 'Sarah', 'David', 'Emma', 'James', 'Maria'];
    return names[Math.floor(Math.random() * names.length)];
  }

  randomLastName() {
    const names = ['Smith', 'Johnson', 'Williams', 'Brown', 'Jones', 'Garcia', 'Miller', 'Davis'];
    return names[Math.floor(Math.random() * names.length)];
  }

  randomAmount(min, max) {
    return (Math.random() * (max - min) + min).toFixed(2);
  }

  randomProductName() {
    const adjectives = ['Premium', 'Deluxe', 'Standard', 'Pro', 'Basic'];
    const products = ['Widget', 'Gadget', 'Device', 'Tool', 'Solution'];
    return adjectives[Math.floor(Math.random() * adjectives.length)] + ' ' +
           products[Math.floor(Math.random() * products.length)];
  }

  randomCarrier() {
    const carriers = ['FedEx', 'UPS', 'DHL', 'USPS', 'Amazon'];
    return carriers[Math.floor(Math.random() * carriers.length)];
  }

  randomPaymentMethod() {
    const methods = ['card', 'bank_account', 'apple_pay', 'google_pay'];
    return methods[Math.floor(Math.random() * methods.length)];
  }

  randomPaymentErrorCode() {
    const codes = ['card_declined', 'insufficient_funds', 'expired_card', 'invalid_cvc'];
    return codes[Math.floor(Math.random() * codes.length)];
  }

  randomPaymentErrorMessage() {
    const messages = ['Your card was declined', 'Insufficient funds', 'Card expired', 'Invalid CVC'];
    return messages[Math.floor(Math.random() * messages.length)];
  }

  randomEmailSubject() {
    const subjects = ['Order Confirmation', 'Payment Receipt', 'Welcome to TriggersAPI', 'Account Updated'];
    return subjects[Math.floor(Math.random() * subjects.length)];
  }

  randomWebhookSource() {
    const sources = ['github', 'slack', 'stripe', 'shopify', 'github'];
    return sources[Math.floor(Math.random() * sources.length)];
  }

  randomWebhookEvent() {
    const events = ['push', 'pull_request', 'message', 'payment', 'order'];
    return events[Math.floor(Math.random() * events.length)];
  }

  futureDate(minDays, maxDays) {
    const days = Math.floor(Math.random() * (maxDays - minDays + 1)) + minDays;
    const future = new Date();
    future.setDate(future.getDate() + days);
    return future.toISOString();
  }

  // Public API
  getTemplates() {
    return Object.values(this.templates).map(t => ({
      id: t.eventType,
      name: t.name,
      icon: t.icon,
      category: t.category,
      description: t.description
    }));
  }

  generateEvent(templateId, customizations = {}) {
    const template = this.templates[templateId];
    if (!template) throw new Error(`Unknown template: ${templateId}`);

    const event = template.generate();

    // Apply customizations
    if (customizations.payload) {
      event.payload = { ...event.payload, ...customizations.payload };
    }

    return event;
  }

  generateBatch(templateId, count = 1) {
    const events = [];
    for (let i = 0; i < count; i++) {
      events.push(this.generateEvent(templateId));
    }
    return events;
  }

  generateDemoScenario() {
    // Sequence: user created â†’ order created â†’ order paid â†’ email sent
    return [
      this.generateEvent('user.created'),
      this.generateEvent('order.created'),
      this.generateEvent('order.paid'),
      this.generateEvent('email.sent')
    ];
  }
}

// Export for use in UI
window.mockDataGenerator = new MockDataGenerator();
```

### Template Selector UI

```html
<!-- src/ui/mock-data-generator.html -->
<div id="mock-data-section" class="debug-section">
  <h4>Mock Data Generator</h4>

  <div class="template-grid">
    <div class="template-card" data-template="user.created">
      <span class="template-icon">ðŸ‘¤</span>
      <div class="template-info">
        <h5>User Created</h5>
        <p>New user account</p>
      </div>
      <button class="btn-use" onclick="useMockTemplate('user.created')">Use</button>
    </div>

    <div class="template-card" data-template="order.created">
      <span class="template-icon">ðŸ›’</span>
      <div class="template-info">
        <h5>Order Created</h5>
        <p>New order placed</p>
      </div>
      <button class="btn-use" onclick="useMockTemplate('order.created')">Use</button>
    </div>

    <div class="template-card" data-template="payment.completed">
      <span class="template-icon">ðŸ’³</span>
      <div class="template-info">
        <h5>Payment Completed</h5>
        <p>Payment received</p>
      </div>
      <button class="btn-use" onclick="useMockTemplate('payment.completed')">Use</button>
    </div>

    <!-- More template cards... -->
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions">
    <button class="btn btn-primary" onclick="loadDemoData()">ðŸ“Š Load Demo (5 events)</button>
    <button class="btn btn-secondary" onclick="showBatchGenerator()">ðŸ“¦ Batch Generate</button>
    <button class="btn btn-secondary" onclick="generateScenario()">ðŸŽ¬ Realistic Scenario</button>
  </div>

  <!-- Batch Generator Modal -->
  <div id="batch-modal" class="modal hidden">
    <div class="modal-content">
      <h3>Generate Batch Events</h3>
      <select id="batch-template" class="form-select">
        <!-- Populated dynamically -->
      </select>
      <input type="number" id="batch-count" min="1" max="100" value="10" placeholder="How many events?">
      <button class="btn btn-primary" onclick="submitBatch()">Generate</button>
      <button class="btn btn-secondary" onclick="closeBatchModal()">Cancel</button>
    </div>
  </div>
</div>
```

### Mock Data Generator JavaScript

```javascript
// src/ui/mock-data-handler.js
async function useMockTemplate(templateId) {
  try {
    const event = window.mockDataGenerator.generateEvent(templateId);

    const response = await fetch('/events', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${getToken()}`
      },
      body: JSON.stringify(event)
    });

    const data = await response.json();
    if (response.ok) {
      toast.success(`Event created: ${templateId}`, {
        details: `Event ID: ${data.data.event_id}`
      });
    } else {
      toast.error('Failed to create event', data.error?.code);
    }
  } catch (error) {
    toast.error('Error: ' + error.message);
  }
}

async function loadDemoData() {
  const templateIds = ['user.created', 'order.created', 'order.paid', 'payment.completed', 'email.sent'];
  const loadingId = toast.loading('Generating demo data...');

  try {
    let succeeded = 0;
    for (const templateId of templateIds) {
      const event = window.mockDataGenerator.generateEvent(templateId);
      const response = await fetch('/events', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${getToken()}`
        },
        body: JSON.stringify(event)
      });

      if (response.ok) {
        succeeded++;
      }

      // Small delay between requests
      await new Promise(resolve => setTimeout(resolve, 100));
    }

    toast.remove(loadingId);
    toast.success(`Demo data loaded: ${succeeded} events created`);
  } catch (error) {
    toast.remove(loadingId);
    toast.error('Error loading demo data: ' + error.message);
  }
}

function showBatchGenerator() {
  const modal = document.getElementById('batch-modal');
  const select = document.getElementById('batch-template');

  select.innerHTML = window.mockDataGenerator.getTemplates()
    .map(t => `<option value="${t.id}">${t.name}</option>`)
    .join('');

  modal.classList.remove('hidden');
}

async function submitBatch() {
  const templateId = document.getElementById('batch-template').value;
  const count = parseInt(document.getElementById('batch-count').value);

  if (count < 1 || count > 100) {
    toast.warning('Count must be between 1 and 100');
    return;
  }

  closeBatchModal();
  const loadingId = toast.loading(`Generating ${count} events...`);

  try {
    const events = window.mockDataGenerator.generateBatch(templateId, count);
    let succeeded = 0;

    for (const event of events) {
      const response = await fetch('/events', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${getToken()}`
        },
        body: JSON.stringify(event)
      });

      if (response.ok) {
        succeeded++;
      }

      // Small delay to avoid overwhelming server
      await new Promise(resolve => setTimeout(resolve, 50));
    }

    toast.remove(loadingId);
    toast.success(`Batch complete: ${succeeded}/${count} events created`);
  } catch (error) {
    toast.remove(loadingId);
    toast.error('Batch generation failed: ' + error.message);
  }
}

function closeBatchModal() {
  document.getElementById('batch-modal').classList.add('hidden');
}

async function generateScenario() {
  const loadingId = toast.loading('Generating realistic scenario...');

  try {
    const scenario = window.mockDataGenerator.generateDemoScenario();
    let succeeded = 0;

    for (const event of scenario) {
      const response = await fetch('/events', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${getToken()}`
        },
        body: JSON.stringify(event)
      });

      if (response.ok) {
        succeeded++;
      }

      // Delay to show sequence
      await new Promise(resolve => setTimeout(resolve, 500));
    }

    toast.remove(loadingId);
    toast.success(`Scenario complete: ${succeeded} events created in sequence`);
  } catch (error) {
    toast.remove(loadingId);
    toast.error('Scenario generation failed: ' + error.message);
  }
}
```

## Implementation Workflow

1. **Create Mock Data Library**
   - Implement MockDataGenerator class
   - Add all event templates
   - Implement utility methods for random data

2. **Create Template UI**
   - Add HTML for template selector
   - Create template cards grid
   - Add quick action buttons

3. **Implement Generators**
   - Single event generation
   - Batch generation
   - Scenario generation

4. **Add Modal for Batch**
   - Create batch configuration modal
   - Input for count
   - Template selector

5. **Integrate with Debug Panel**
   - Add mock data section to debug panel
   - Connect buttons to generation functions
   - Show success/error feedback

6. **Test Data Realism**
   - Verify data matches real Zapier structures
   - Ensure UUIDs are properly formatted
   - Validate metadata structure
   - Test with API to ensure acceptance

## Verification Checklist

- [ ] Mock data library has 10+ templates
- [ ] Event payloads match API expectations
- [ ] Metadata includes event_type and source
- [ ] UUIDs generated with correct prefixes
- [ ] Email addresses properly formatted
- [ ] Amounts are realistic and properly formatted
- [ ] Timestamps are ISO-8601 format
- [ ] Template selector displays all templates
- [ ] Single event generation works
- [ ] Batch generation works (10-100 events)
- [ ] Scenario generation creates sequence
- [ ] Toast feedback shows success/errors
- [ ] Loading indicator appears during generation
- [ ] Modal opens/closes correctly
- [ ] Data persists after generation (shows in inbox)

## Notes

- Use deterministic random generation for reproducibility
- Keep template data realistic and varied
- Batch generation should add small delays to avoid overwhelming system
- Scenarios should tell a story (user â†’ order â†’ payment)
- Mock data should match real Zapier event structures
- Include different categories to showcase system flexibility

## Related Stories

- **5.1:** Debug control panel (integrated here)
- **5.2:** Visual feedback (toasts for feedback)
- **3.5:** Event inbox (view generated events)

---

## Dev Agent Record

*To be filled by development agent*

---

## QA Results

*To be filled by QA agent*
